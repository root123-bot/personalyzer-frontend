(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83],{1300:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tigopesa",function(){return n(8747)}])},8747:function(e,a,n){"use strict";n.r(a);var s=n(4111),t=n(7568),r=n(1438),i=n(2951),o=n(4924),c=n(8029),l=n(5950),d=n(4051),h=n.n(d),u=n(5893),m=n(7294),p=n(5152),x=n.n(p),g=n(8202),_=n.n(g),j=n(9008),b=n.n(j),y=n(4623),f=n(8005),k=n(5150),v=n(6245),w=n(1163),N=n.n(w),S=n(8286),T=x()((function(){return n.e(852).then(n.t.bind(n,1852,23))}),{loadableGenerated:{webpack:function(){return[1852]}},ssr:!1}),Z=function(e){(0,c.Z)(n,e);var a=(0,l.Z)(n);function n(e){var i;(0,r.Z)(this,n),i=a.call(this,e),(0,o.Z)((0,s.Z)(i),"state",{isAunthenticated:!1,data:[],cart_id:0,user_id:0,transactionId:"",phone_number:"",errorMessage:""});var c=(0,s.Z)(i);(0,o.Z)((0,s.Z)(i),"onPlaceOrder",function(){var e=(0,t.Z)(h().mark((function e(a){var n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),console.log("Hellow",c.state.transactionId,c.state.phone_number),0!==c.state.transactionId.trim().length&&0!==c.state.phone_number.trim().length){e.next=11;break}return console.log("we dont accept empty string..."),c.setState({errorMessage:"Failed, We don't accept empty fields"}),c.err.current.style.display="block",c.timeout=setTimeout((function(){c.err.current.style.display="none"}),5e3),c.setState({phone_number:"",transactionId:""}),c.muamala.current.value="",c.phone.current.value="",e.abrupt("return");case 11:if(!(c.state.phone_number.trim().length<10)){e.next=19;break}return c.setState({errorMessage:"Failed, phone number looks to be invalid!"}),c.err.current.style.display="block",c.timeout=setTimeout((function(){c.err.current.style.display="none"}),5e3),c.setState({phone_number:"",transactionId:""}),c.muamala.current.value="",c.phone.current.value="",e.abrupt("return");case 19:return e.next=21,fetch("".concat(S.Z,"/api/create_order/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:c.state.transactionId,mobile:parseInt(c.state.phone_number),id:c.state.user_id,cartId:c.state.cart_id})});case 21:return n=e.sent,e.next=24,n.json();case 24:if(s=e.sent,console.log("this is data for you"),console.log(s),!s.success){e.next=31;break}return e.abrupt("return",N().push({pathname:"/done",query:{unique_id:s.unique_id}}));case 31:console.log("Something is wrong here...");case 32:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),(0,o.Z)((0,s.Z)(i),"updateToken",function(){var e=(0,t.Z)(h().mark((function e(a){var n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S.Z,"/api/token/refresh/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:a})});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,localStorage.setItem("authTokens",JSON.stringify(s));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());var l=(0,s.Z)(i);return(0,o.Z)((0,s.Z)(i),"executingTokenLogics",(0,t.Z)(h().mark((function e(){var a,n,s,t,r,i,o,c,d,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=localStorage.getItem("authTokens")?JSON.parse(localStorage.getItem("authTokens")):null){e.next=6;break}return console.log("You needed to login, no records"),l.setState({isAunthenticated:!1}),e.abrupt("return");case 6:if(n=(0,v.Z)(a.refresh),s=n.exp,console.log("Hey this is the expire date of the refreshToken"),console.log(s),console.log("Lets try to access the json access token"),console.log(a.access),t=(0,v.Z)(a.access),console.log("This is expiring time for you..."),console.log(t),r=t.user_id,l.setState({user_id:r}),console.log("This is user_id for you"),console.log(r),i=t.exp,console.log(i),!(1e3*i-Date.now()<1)){e.next=40;break}if(console.log("Hey we need to either update or make user login again"),!(1e3*s-Date.now<1)){e.next=28;break}return console.log("Even ur refresh token has already been expired we need you to login again...."),l.setState({isAunthenticated:!1}),e.abrupt("return");case 28:return console.log("Our refresh token is alive you should use it to update your access token"),l.updateToken(a.refresh),l.setState({isAunthenticated:!0}),e.next=33,fetch("".concat(S.Z,"/api/cartproducts/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r})});case 33:return o=e.sent,e.next=36,o.json();case 36:(c=e.sent).message||l.setState({data:c,cart_id:c[0].get_cartId}),e.next=48;break;case 40:return l.setState({isAunthenticated:!0}),e.next=43,fetch("".concat(S.Z,"/api/cartproducts/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r})});case 43:return d=e.sent,e.next=46,d.json();case 46:(u=e.sent).message||l.setState({data:u,cart_id:u[0].get_cartId});case 48:e.next=55;break;case 50:e.prev=50,e.t0=e.catch(0),console.log(e.t0.message),console.log("Invalid token specified since, when the token is expired the jwt automatically change your storage and it ill look like this"),l.setState({isAunthenticated:!1});case 55:case"end":return e.stop()}}),e,null,[[0,50]])})))),i.err=m.createRef(),i.muamala=m.createRef(),i.phone=m.createRef(),i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.executingTokenLogics(),console.log(this.state.cart_id,this.state.isAunthenticated)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(T,{maxWidth:899,children:(0,u.jsxs)("div",{children:[(0,u.jsxs)(b(),{children:[(0,u.jsx)("title",{children:"PERSONALYZER"}),(0,u.jsx)("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossorigin:"anonymous"}),(0,u.jsx)("link",{rel:"stylesheet",href:"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.12/semantic.min.css"})]}),this.state.isAunthenticated?this.state.cart_id>0?(0,u.jsxs)("div",{className:_().bothOfUs,children:[(0,u.jsxs)("div",{className:_().main,children:[(0,u.jsxs)("div",{className:_().payMe,children:[(0,u.jsx)("p",{className:_().pay,children:"Mode of payment"}),(0,u.jsx)("div",{className:_().reduceMe,children:(0,u.jsx)(y.Z,{children:(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(f.Z.Column,{width:8,children:(0,u.jsxs)("div",{className:_().phead,children:[(0,u.jsx)("p",{className:_().lnamba,children:"LIPA NAMBA"}),(0,u.jsx)("p",{className:_().aname1,children:"111000"})]})}),(0,u.jsx)(f.Z.Column,{width:8,children:(0,u.jsxs)("div",{className:_().phead2,children:[(0,u.jsx)("p",{className:_().qr,children:"QR CODE"}),(0,u.jsx)("p",{className:_().aqr,children:(0,u.jsx)("img",{width:130,height:130,src:"../static/images/frame.png"})})]})})]})})})]}),(0,u.jsxs)("div",{className:_().out,children:[(0,u.jsx)("p",{className:_().head,style:{background:"rgb(0, 115, 182)"},children:"Jinsi ya kulipia kwa Tigo Pesa"}),(0,u.jsxs)("div",{className:_().meth1,children:[(0,u.jsx)("p",{className:_().htwo,children:"Kwa njia ya kawaida."}),(0,u.jsxs)("div",{className:_().para,children:[(0,u.jsx)("p",{children:"1. Piga *150*01#"}),(0,u.jsx)("p",{children:"2. Chagua 5(Lipa kwa simu) "}),(0,u.jsx)("p",{children:"3. Chagua 1(Kwenda Tigo Pesa)"}),(0,u.jsx)("p",{children:"4. Ingiza lipa namba "}),(0,u.jsx)("p",{children:"5. Ingiza kiasi cha kulipia"}),(0,u.jsx)("p",{children:"6. Ingiza namba ya siri kuthibitisha"}),(0,u.jsxs)("p",{children:["7. Ukishalipia ingiza namba ya muamala(",(0,u.jsx)("b",{children:(0,u.jsx)("i",{children:"Transaction number"})}),") na nambako ya simu(",(0,u.jsx)("b",{children:(0,u.jsx)("i",{children:"Phone number"})}),") kwenye fomu ya kuweka oda(",(0,u.jsx)("b",{children:(0,u.jsx)("i",{children:"Place order"})}),") hapo chini."]})]})]}),(0,u.jsxs)("div",{className:_().meth2,children:[(0,u.jsx)("p",{className:_().htwo,children:"Kwa kutumia Tigo Pesa App"}),(0,u.jsxs)("div",{className:_().para,children:[(0,u.jsx)("p",{children:"1. Fungua app ya TIGO PESA"}),(0,u.jsx)("p",{children:"2.Chagua lipa kwa simu"}),(0,u.jsx)("p",{children:"3. Changua njia ya kufanya malipo kwa kuingiza lipa namba au kuskani picha ya QR"}),(0,u.jsx)("p",{children:"4. Ingiza kiasi cha kulipia"}),(0,u.jsx)("p",{children:"5. Ingiza namba ya siri kuthibitisha"}),(0,u.jsxs)("p",{children:["7. Ukishalipia ingiza namba ya muamala(",(0,u.jsx)("b",{children:(0,u.jsx)("i",{children:"Transaction number"})}),") na nambako ya simu(",(0,u.jsx)("b",{children:(0,u.jsx)("i",{children:"Phone number"})}),") kwenye fomu ya kuweka oda(",(0,u.jsx)("b",{children:(0,u.jsx)("i",{children:"Place order"})}),") hapo chini."]})]})]})]}),(0,u.jsxs)("div",{className:_().moreInfo,children:[(0,u.jsxs)("div",{className:_().help,children:[(0,u.jsxs)("p",{className:_().hin3,children:["*** Contact us to deliver a product anywhere in Tanzania.",(0,u.jsx)("br",{}),"*** Contact us if you face any problem about payment"]}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:_().divu,children:[(0,u.jsxs)("span",{className:_().contacts,children:[(0,u.jsx)(k.Z,{size:"large",name:"whatsapp",color:"grey"}),"+255623317196"]}),(0,u.jsxs)("span",{className:_().contacts,children:[(0,u.jsx)(k.Z,{size:"large",name:"mail outline",color:"grey"}),"support@personalizer.co.tz"]}),(0,u.jsx)(T,{minWidth:700,children:(0,u.jsxs)("span",{children:[(0,u.jsx)(k.Z,{size:"large",name:"instagram",color:"grey"}),"support@personalizer.co.tz"]})})]})]}),(0,u.jsxs)("div",{className:_().forPick,children:[(0,u.jsx)("p",{className:_().infoP,children:"For picking your product at station use this address:"}),(0,u.jsx)("address",{style:{color:"#5e8ba8"},children:(0,u.jsxs)("i",{children:["Kariakoo, Aggrey na Likoma Street,",(0,u.jsx)("br",{}),"Dar es salaam,",(0,u.jsx)("br",{}),"0623317196,",(0,u.jsx)("br",{}),"onlinetek@gmail.com"]})})]})]})]}),(0,u.jsx)("div",{className:_().imHereToStay,style:{background:"rgb(123, 197, 220)"},children:(0,u.jsxs)("form",{children:[(0,u.jsx)("label",{className:_().lab,children:"Transaction number:"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{className:_().inp,ref:this.muamala,onChange:function(a){return e.setState({transactionId:a.target.value})}})," ",(0,u.jsx)("br",{}),(0,u.jsx)("label",{className:_().lab1,children:"Phone number:"})," ",(0,u.jsx)("br",{}),(0,u.jsx)("input",{className:_().inp,ref:this.phone,onChange:function(a){return e.setState({phone_number:a.target.value})}})," ",(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:_().error,ref:this.err,children:[(0,u.jsx)("img",{src:"../static/images/warning.png",width:12}),(0,u.jsx)("span",{className:_().neno1,children:this.state.errorMessage})]}),(0,u.jsx)("button",{className:_().btn,onClick:this.onPlaceOrder,style:{background:"#f7e240",color:"grey"},children:"Place order"})]})})]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("p",{children:"Sorry your cart appear to be empty. Shop now for you to place order, we should have a image and a button of shop now.."})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("p",{children:"Hey you should login to place order. Login here..."})})]})}),(0,u.jsx)(T,{minWidth:900,children:(0,u.jsx)("h2",{style:{textAlign:"center"},children:"Out of screen width.."})})]})}}]),n}(m.Component);a.default=Z},8286:function(e,a){"use strict";a.Z="https://web-production-0b93.up.railway.app"},8202:function(e){e.exports={head:"mode_head___PCsD",hl:"mode_hl__qgVzU",htwo:"mode_htwo__aGS57",para:"mode_para__oz5ty",meth1:"mode_meth1__ybj9S",meth2:"mode_meth2__gnmSZ",payMe:"mode_payMe__gekk2",pay:"mode_pay__k8ZkW",reduceMe:"mode_reduceMe__Y_Qse",aqr:"mode_aqr__fsD3o",qr:"mode_qr__P7RBT",lnamba:"mode_lnamba__CQYae",aname1:"mode_aname1__1QRva",moreInfo:"mode_moreInfo__peJes",help:"mode_help__CKkz3",hin3:"mode_hin3__49qgE",divu:"mode_divu__b6oh0",forPick:"mode_forPick__Yi15E",infoP:"mode_infoP__N5_Xe",main:"mode_main__KGr1_",imHereToStay:"mode_imHereToStay__6lG91",inp:"mode_inp__MY1sl",lab:"mode_lab__cPVR4",lab1:"mode_lab1__0VvKN",btn:"mode_btn__yNg1h",error:"mode_error__wGPA5",contacts:"mode_contacts__X8oJ5"}}},function(e){e.O(0,[774,351,990,888,179],(function(){return a=1300,e(e.s=a);var a}));var a=e.O();_N_E=a}]);