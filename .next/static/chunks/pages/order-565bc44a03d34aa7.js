(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{6245:function(e,t,r){"use strict";function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,s=0,i=0,c="";a=t.charAt(i++);~a&&(r=s%4?64*r+a:a,s++%4)?c+=String.fromCharCode(255&r>>(-2*s&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return c};function s(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return a(t)}}function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.Z=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(s(e.split(".")[r]))}catch(e){throw new i("Invalid token specified: "+e.message)}}},3376:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order",function(){return r(2538)}])},2538:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(4111),a=r(7568),s=r(1438),i=r(2951),c=r(4924),o=r(8029),l=r(5950),d=r(4051),h=r.n(d),u=r(5893),p=r(7294),m=r(1061),g=r.n(m),x=r(3623),j=r(4623),f=r(8005),_=r(7462),v=r(6010),y=r(8459),b=r(8935),k=r(2519),w=r(2248);function N(e){var t=e.children,r=e.className,n=e.clearing,a=e.content,s=e.fitted,i=e.hidden,c=e.horizontal,o=e.inverted,l=e.section,d=e.vertical,h=(0,v.Z)("ui",(0,y.lG)(n,"clearing"),(0,y.lG)(s,"fitted"),(0,y.lG)(i,"hidden"),(0,y.lG)(c,"horizontal"),(0,y.lG)(o,"inverted"),(0,y.lG)(l,"section"),(0,y.lG)(d,"vertical"),"divider",r),u=(0,b.Z)(N,e),m=(0,k.Z)(N,e);return p.createElement(m,(0,_.Z)({},u,{className:h}),w.kK(t)?a:t)}N.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],N.propTypes={};var Z=N,S=r(8936),A=r(967),T=r(5150),C=r(9008),P=r.n(C),I=r(6245),O=r(1163),E=r.n(O),G=r(5152),M=r.n(G)()((function(){return r.e(852).then(r.t.bind(r,1852,23))}),{loadableGenerated:{webpack:function(){return[1852]}},ssr:!1}),R=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(e){var i;(0,s.Z)(this,r),i=t.call(this,e),(0,c.Z)((0,n.Z)(i),"state",{isAunthenticated:!1,attributeValue:"Pick at Station",attributeValue1:"M-PESA",data:[],user_id:0,cart_id:0,transactionId:"",phone_number:"",errorMessage:""});var o=(0,n.Z)(i);(0,c.Z)((0,n.Z)(i),"executingTokenLogics",(0,a.Z)(h().mark((function e(){var t,r,n,a,s,i,c,l,d,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("authTokens")?JSON.parse(localStorage.getItem("authTokens")):null){e.next=6;break}return console.log("You needed to login, no records"),o.setState({isAunthenticated:!1}),e.abrupt("return");case 6:if(r=(0,I.Z)(t.refresh),n=r.exp,console.log("Hey this is the expire date of the refreshToken"),console.log(n),console.log("Lets try to access the json access token"),console.log(t.access),a=(0,I.Z)(t.access),console.log("This is expiring time for you..."),console.log(a),s=a.user_id,o.setState({user_id:s}),console.log("This is user_id for you"),console.log(s),i=a.exp,console.log(i),!(1e3*i-Date.now()<1)){e.next=40;break}if(console.log("Hey we need to either update or make user login again"),!(1e3*n-Date.now<1)){e.next=28;break}return console.log("Even ur refresh token has already been expired we need you to login again...."),o.setState({isAunthenticated:!1}),e.abrupt("return");case 28:return console.log("Our refresh token is alive you should use it to update your access token"),o.updateToken(t.refresh),o.setState({isAunthenticated:!0}),e.next=33,fetch("http://127.0.0.1:8000/api/cartproducts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s})});case 33:return c=e.sent,e.next=36,c.json();case 36:(l=e.sent).message||o.setState({data:l,cart_id:l[0].get_cartId}),e.next=48;break;case 40:return o.setState({isAunthenticated:!0}),e.next=43,fetch("http://127.0.0.1:8000/api/cartproducts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s})});case 43:return d=e.sent,e.next=46,d.json();case 46:(u=e.sent).message||o.setState({data:u,cart_id:u[0].get_cartId});case 48:e.next=55;break;case 50:e.prev=50,e.t0=e.catch(0),console.log(e.t0.message),console.log("Invalid token specified since, when the token is expired the jwt automatically change your storage and it ill look like this"),o.setState({isAunthenticated:!1});case 55:case"end":return e.stop()}}),e,null,[[0,50]])}))));var l=(0,n.Z)(i);return(0,c.Z)((0,n.Z)(i),"onPlaceOrder",function(){var e=(0,a.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==l.state.transactionId.trim().length&&0!==l.state.phone_number.trim().length){e.next=7;break}return console.log("we dont accept empty string..."),l.setState({errorMessage:"Failed, We don't accept empty fields"}),l.err.current.style.display="block",l.timeout=setTimeout((function(){l.err.current.style.display="none"}),5e3),e.abrupt("return");case 7:if(!(l.state.phone_number.trim().length<10)){e.next=12;break}return l.setState({errorMessage:"Failed, phone number looks to be invalid!"}),l.err.current.style.display="block",l.timeout=setTimeout((function(){l.err.current.style.display="none"}),5e3),e.abrupt("return");case 12:return e.next=14,fetch("http://127.0.0.1:8000/api/create_order/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:l.state.transactionId,mobile:parseInt(l.state.phone_number),id:l.state.user_id,cartId:l.state.cart_id})});case 14:return r=e.sent,e.next=17,r.json();case 17:if(n=e.sent,console.log("This is the data you received from the server....."),console.log(n),!n.success){e.next=24;break}return e.abrupt("return",E().push({pathname:"/done",query:{unique_id:n.unique_id}}));case 24:console.log("Something is wrong here...");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)((0,n.Z)(i),"updateToken",function(){var e=(0,a.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:8000/api/token/refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:n=e.sent,localStorage.setItem("authTokens",JSON.stringify(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.err=p.createRef(),i.muamala=p.createRef(),i.phone=p.createRef(),i}return(0,i.Z)(r,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){var e=this;return(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("This is value of isAunthenticated ",e.state.isAunthenticated),e.executingTokenLogics(),e.executingTokenLogicsInterval=setInterval((function(){return e.executingTokenLogics()}),12e5);case 3:case"end":return t.stop()}}),t)})))()}},{key:"render",value:function(){var e=this;return(0,u.jsxs)("div",{className:g().baba,children:[(0,u.jsxs)(P(),{children:[(0,u.jsx)("title",{children:"PERSONALYZER"}),(0,u.jsx)("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossorigin:"anonymous"}),(0,u.jsx)("link",{rel:"stylesheet",href:"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.12/semantic.min.css"})]}),this.state.isAunthenticated?this.state.data.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(M,{maxWidth:899,children:(0,u.jsx)("div",{className:g().sendMeCenter,children:(0,u.jsxs)("div",{className:g().mode,children:[(0,u.jsx)("p",{className:g().titl,children:"Select mode of payment"}),(0,u.jsx)("div",{className:g().mpe,children:(0,u.jsx)("button",{className:g().mpeBtn,onClick:function(){return E().push("/mpesa")},children:"M-PESA"})}),(0,u.jsx)("div",{className:g().tigopesa,children:(0,u.jsx)("button",{className:g().tigBtn,onClick:function(){return E().push("/tigopesa")},children:"TIGO PESA"})})]})})}),(0,u.jsx)(M,{minWidth:900,children:(0,u.jsx)("div",{className:g().test,children:(0,u.jsxs)("div",{className:g().toto,children:[(0,u.jsxs)("div",{className:g().topSeg,children:[(0,u.jsx)(x.Z,{attached:"top",as:"h1",textAlign:"center",color:"grey",content:"Place Order by Confirming payment and Delivery method"}),(0,u.jsx)(j.Z,{attached:!0,placeholder:!0,children:(0,u.jsx)("div",{style:{marginLeft:"2%"},children:(0,u.jsxs)(f.Z,{columns:2,children:[(0,u.jsx)(Z,{vertical:!0,children:"|"}),(0,u.jsxs)(f.Z.Row,{children:[(0,u.jsx)(f.Z.Column,{children:(0,u.jsxs)(S.Z,{children:[(0,u.jsxs)(S.Z.Field,{children:[(0,u.jsx)("label",{style:{color:"grey"},children:"Transaction number/Namba ya muamala"}),(0,u.jsx)("input",{onChange:function(t){return e.setState({transactionId:t.target.value})}})]}),(0,u.jsxs)(S.Z.Field,{children:[(0,u.jsx)("label",{style:{color:"grey"},children:"Phone number"}),(0,u.jsx)("input",{onChange:function(t){return e.setState({phone_number:t.target.value})}})]}),(0,u.jsxs)("div",{className:g().error,ref:this.err,children:[(0,u.jsx)("img",{src:"../static/images/warning.png",width:12}),(0,u.jsx)("span",{className:g().neno1,children:this.state.errorMessage})]}),(0,u.jsx)(A.Z,{color:"black",fluid:!0,type:"submit",onClick:this.onPlaceOrder,children:"Place Order"})]})}),(0,u.jsxs)(f.Z.Column,{children:[(0,u.jsxs)("div",{className:g().not1Wrapper,children:[(0,u.jsx)("p",{className:g().hint,children:"For picking your product at station, use this address:"}),(0,u.jsx)("div",{className:g().addr,children:(0,u.jsx)("address",{children:(0,u.jsxs)("i",{children:["Kariakoo, Aggrey na Likoma Street,",(0,u.jsx)("br",{}),"Dar es salaam,",(0,u.jsx)("br",{}),"0623317196,",(0,u.jsx)("br",{}),"onlinetek@gmail.com"]})})})]}),(0,u.jsxs)("div",{className:g().not2Wrapper,children:[(0,u.jsxs)("p",{className:g().hint2,children:["***Contact us to deliver a product anywhere in Tanzania.",(0,u.jsx)("br",{}),"***Contact us if you face any problem about the payment."]}),(0,u.jsxs)("div",{className:g().bt,children:[(0,u.jsxs)("span",{style:{fontWeight:"bold",color:"grey",marginRight:"5%"},children:[(0,u.jsx)(T.Z,{size:"large",name:"whatsapp",color:"black"}),"+255623317196"]}),(0,u.jsxs)("span",{style:{fontWeight:"bold",color:"grey",marginRight:"4%"},children:[(0,u.jsx)(T.Z,{size:"large",name:"instagram",color:"black"}),"@personalizer"]}),(0,u.jsxs)("span",{style:{fontWeight:"bold",color:"grey"},children:[(0,u.jsx)(T.Z,{size:"large",name:"mail outline",color:"black"}),"support@personalizer.co.tz"]})]})]})]})]})]})})})]}),(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(f.Z.Column,{width:10,children:(0,u.jsx)("div",{className:g().seg2,children:(0,u.jsxs)(j.Z,{children:[(0,u.jsx)(x.Z,{as:"h1",color:"grey",content:"Mode of Payments"}),(0,u.jsx)("hr",{}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:g().mpesa,children:"M-PESA"}),(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(f.Z.Column,{width:8,children:(0,u.jsxs)("div",{style:{marginLeft:"5%"},children:[(0,u.jsx)("p",{className:g().lnamba,children:"LIPA NAMBA"}),(0,u.jsx)("span",{className:g().aname1,children:"111000"})]})}),(0,u.jsx)(f.Z.Column,{width:8,children:(0,u.jsxs)("div",{style:{marginLeft:"5%"},children:[(0,u.jsx)("p",{className:g().qr,children:"QR CODE"}),(0,u.jsx)("p",{className:g().aqr,children:(0,u.jsx)("img",{width:150,height:150,src:"../static/images/frame.png"})})]})})]})]}),(0,u.jsxs)("div",{style:{marginTop:"2%"},children:[(0,u.jsx)("h3",{className:g().tpesa,children:"TIGO PESA"}),(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(f.Z.Column,{width:8,children:(0,u.jsxs)("div",{style:{marginLeft:"5%"},children:[(0,u.jsx)("p",{className:g().lnamba,children:"LIPA NAMBA"}),(0,u.jsx)("span",{className:g().aname,children:"111234"})]})}),(0,u.jsx)(f.Z.Column,{width:8,children:(0,u.jsxs)("div",{style:{marginLeft:"5%"},children:[(0,u.jsx)("p",{className:g().qr,children:"QR CODE"}),(0,u.jsx)("p",{className:g().aqr,children:(0,u.jsx)("img",{width:150,height:150,src:"../static/images/frame.png"})})]})})]})]})]})})}),(0,u.jsxs)(f.Z.Column,{width:6,children:[(0,u.jsxs)("div",{className:g().p1,children:[(0,u.jsx)(x.Z,{as:"h2",color:"grey",attached:"top",content:"Jinsi ya kulipia kwa M-PESA"}),(0,u.jsx)(j.Z,{attached:!0,children:(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:g().hd,children:(0,u.jsx)("h3",{className:g().kichwa,children:"Kwa njia ya kawaida"})}),(0,u.jsxs)("div",{className:g().para,children:[(0,u.jsx)("p",{children:"1. Piga *150*00#"}),(0,u.jsx)("p",{children:"2. "})]}),(0,u.jsx)("div",{className:g().hd1,children:(0,u.jsx)("h3",{className:g().kichwa,children:"Kwa kutumia M-PESA app."})}),(0,u.jsxs)("div",{className:g().para,children:[(0,u.jsx)("p",{children:"1. Fungua app yako ya M-PESA"}),(0,u.jsx)("p",{children:"2. Juu upande wa kulia bonyeza picha ya QR code"})]})]})})]}),(0,u.jsxs)("div",{className:g().p2,children:[(0,u.jsx)(x.Z,{attached:"top",as:"h2",color:"grey",content:"Jinsi ya kulipia kwa TIGO PESA"}),(0,u.jsx)(j.Z,{attached:!0,children:(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:g().hd2,children:(0,u.jsx)("h3",{className:g().kichwa,children:"Kwa njia ya kawaida"})}),(0,u.jsxs)("div",{className:g().para,children:[(0,u.jsx)("p",{children:"1. Piga *150*01#"}),(0,u.jsx)("p",{children:"2. Chagua 5(Lipa kwa simu) "}),(0,u.jsx)("p",{children:"3. Chagua 1(Kwenda Tigo Pesa)"}),(0,u.jsx)("p",{children:"4. Ingiza lipa namba "}),(0,u.jsx)("p",{children:"5. Ingiza kiasi cha kulipia"}),(0,u.jsx)("p",{children:"6. Ingiza namba ya siri kuthibitisha"})]}),(0,u.jsx)("div",{className:g().hd3,children:(0,u.jsx)("h3",{className:g().kichwa,children:"Kwa kutumia TIGO PESA app."})}),(0,u.jsxs)("div",{className:g().para,children:[(0,u.jsx)("p",{children:"1. Fungua app ya TIGO PESA"}),(0,u.jsx)("p",{children:"2.Chagua lipa kwa simu"}),(0,u.jsx)("p",{children:"3. Changua njia ya kufanya malipo kwa kuingiza lipa namba au kuskani picha ya QR"}),(0,u.jsx)("p",{children:"4. Ingiza kiasi cha kulipia"}),(0,u.jsx)("p",{children:"5. Ingiza namba ya siri kuthibitisha"})]})]})})]})]})]})]})})})]}):(0,u.jsx)("div",{children:"Your cart is empty, You can't place order for empty cart..."}):(0,u.jsx)("div",{children:"You're needed to be Aunthenticated..."})]})}}]),r}(p.Component),z=R},1061:function(e){e.exports={baba:"order_baba__I__y4",topSeg:"order_topSeg__Po2oc",test:"order_test__wAGOe",toto:"order_toto__PVSsc",seg1:"order_seg1__sOyyu",seg2:"order_seg2__i6BkE",p1:"order_p1__632Rq",p2:"order_p2__SvoD_",hd:"order_hd__5zUdB",kichwa:"order_kichwa__GtHG2",para:"order_para__t6sMn",hd1:"order_hd1__mYgYY",hd2:"order_hd2__QhH3l",hd3:"order_hd3__Bi6a6",mpesa:"order_mpesa__9UO1f",tpesa:"order_tpesa__GtKZ_",lnamba:"order_lnamba__YPzpU",qr:"order_qr__X1_IN",aname:"order_aname__jsEpY",aname1:"order_aname1__MoV6C",hint:"order_hint__Ku2v3",addr:"order_addr__FeWjp",hint2:"order_hint2__WxlFa",bt:"order_bt__v5X_s",error:"order_error__26_t6",sendMeCenter:"order_sendMeCenter__Jq2_A",titl:"order_titl__9_S1x",mpe:"order_mpe__F15qg",mpeBtn:"order_mpeBtn__Pu9mR",tigBtn:"order_tigBtn__Sa0rr"}},8005:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(7462),a=r(6010),s=r(7294),i=r(8459),c=r(8935),o=r(2519),l=r(9591);function d(e){var t=e.children,r=e.className,l=e.computer,h=e.color,u=e.floated,p=e.largeScreen,m=e.mobile,g=e.only,x=e.stretched,j=e.tablet,f=e.textAlign,_=e.verticalAlign,v=e.widescreen,y=e.width,b=(0,a.Z)(h,(0,i.lG)(x,"stretched"),(0,i.MR)(g,"only"),(0,i.X4)(f),(0,i.cD)(u,"floated"),(0,i.Ok)(_),(0,i.H0)(l,"wide computer"),(0,i.H0)(p,"wide large screen"),(0,i.H0)(m,"wide mobile"),(0,i.H0)(j,"wide tablet"),(0,i.H0)(v,"wide widescreen"),(0,i.H0)(y,"wide"),"column",r),k=(0,c.Z)(d,e),w=(0,o.Z)(d,e);return s.createElement(w,(0,n.Z)({},k,{className:b}),t)}d.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],d.propTypes={},d.create=(0,l.u5)(d,(function(e){return{children:e}}));var h=d;function u(e){var t=e.centered,r=e.children,l=e.className,d=e.color,h=e.columns,p=e.divided,m=e.only,g=e.reversed,x=e.stretched,j=e.textAlign,f=e.verticalAlign,_=(0,a.Z)(d,(0,i.lG)(t,"centered"),(0,i.lG)(p,"divided"),(0,i.lG)(x,"stretched"),(0,i.MR)(m,"only"),(0,i.MR)(g,"reversed"),(0,i.X4)(j),(0,i.Ok)(f),(0,i.H0)(h,"column",!0),"row",l),v=(0,c.Z)(u,e),y=(0,o.Z)(u,e);return s.createElement(y,(0,n.Z)({},v,{className:_}),r)}u.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],u.propTypes={};var p=u;function m(e){var t=e.celled,r=e.centered,l=e.children,d=e.className,h=e.columns,u=e.container,p=e.divided,g=e.doubling,x=e.inverted,j=e.padded,f=e.relaxed,_=e.reversed,v=e.stackable,y=e.stretched,b=e.textAlign,k=e.verticalAlign,w=(0,a.Z)("ui",(0,i.lG)(r,"centered"),(0,i.lG)(u,"container"),(0,i.lG)(g,"doubling"),(0,i.lG)(x,"inverted"),(0,i.lG)(v,"stackable"),(0,i.lG)(y,"stretched"),(0,i.sU)(t,"celled"),(0,i.sU)(p,"divided"),(0,i.sU)(j,"padded"),(0,i.sU)(f,"relaxed"),(0,i.MR)(_,"reversed"),(0,i.X4)(b),(0,i.Ok)(k),(0,i.H0)(h,"column",!0),"grid",d),N=(0,c.Z)(m,e),Z=(0,o.Z)(m,e);return s.createElement(Z,(0,n.Z)({},N,{className:w}),l)}m.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],m.Column=h,m.Row=p,m.propTypes={};var g=m}},function(e){e.O(0,[774,351,967,464,888,179],(function(){return t=3376,e(e.s=t);var t}));var t=e.O();_N_E=t}]);